\* SPECIFICATION
\* Uncomment the previous line and provide the specification name if it's declared
\* in the specification file. Comment INIT / NEXT parameters if you use SPECIFICATION.

CONSTANTS
    INITIAL_TIER_ONE_KEY = 0
    INITIAL_TIER_TWO_KEY = 1
    BALANCE_LIMIT = 3
    MAX_BLOCK_NUMBER = 2
    ADDRESSES <- ADDRESSES_const
    MONEY <- MONEY_const
    REQUEST_IDS <- REQUEST_IDS_const
    DELAY_CONST = 1


SPECIFICATION Spec

CHECK_DEADLOCK FALSE

PROPERTY
\* 1. Base layer
    CannotWithdrawBeforeDelay
    CannotChangeDelay
    CannotRemoveTierOneAddress
\* 2. Key separation layer
    TierOneAndTwoSeparated
    OnlyTierOneCanAddTierOne
\* 3. Recovery layer
    MoneyCannotLeaveLocked
    UnlockTimeOnlyIncrease
    OnlyTierOneCanLock
    OnlyTierOneCanRemoveTierTwo
    OnlyTierOneCanAddTierTwo
\* 4. Tier-one minimization layer
    BalanceEnoughtToWithdrawAll

INVARIANT
    TypeOK
